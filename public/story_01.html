<!--
    IMD3901B Design Studio 3 Winter 2022
    Term Project - The Sacred Meeting Place
    Triple Peanuts - Angelina Belingan, Jacqueline Lee, Violet Nguyen 
-->

<!--
   Cave Art 1 - Sky World: Thunderbird Story
-->

<!DOCTYPE html>
<html>
<head>
    <title>The Sacred Meeting Place</title>
    <meta name="description" content="The Sacred Meeting Place, a WebVR storytelling experience.">
    <script src="/js/aframe.min.js"></script>
    <script src="/js/aframe-environment-component.min.js"></script>
    <script src="/js/wall-interaction-1.js"></script>
    <script src="/js/wall-interaction-2.js"></script>
    <script src="/js/thunderbird.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/donmccurdy/aframe-extras@v6.1.1/dist/aframe-extras.min.js"></script>

    <link rel="stylesheet" href="/css/user-gesture.css">
</head>
    
    <body>
        <a-scene id="cave-one" fog="type:exponential">
            <a-assets timeout="1000">

                <!-- Import models and other assets here -->
                <img id="cave-texture" src="Textures/cave-texture.jpg">

                <!-- Import narration audio -->
                <audio src="/assets/Audio/narration/thunderbird_01.mp3" preload="auto" crossorigin="anonymous"></audio>
                <audio src="/assets/Audio/narration/thunderbird_02.mp3" preload="auto" crossorigin="anonymous"></audio>
                <audio src="/assets/Audio/narration/thunderbird_03.mp3" preload="auto" crossorigin="anonymous"></audio>
                <audio src="/assets/Audio/narration/thunderbird_04.mp3" preload="auto" crossorigin="anonymous"></audio>
                <audio src="/assets/Audio/narration/thunderbird_05.mp3" preload="auto" crossorigin="anonymous"></audio>
                <audio src="/assets/Audio/narration/thunderbird_06.mp3" preload="auto" crossorigin="anonymous"></audio>
                <audio src="/assets/Audio/narration/thunderbird_07.mp3" preload="auto" crossorigin="anonymous"></audio>
                <audio src="/assets/Audio/narration/thunderbird_08.mp3" preload="auto" crossorigin="anonymous"></audio>
                <audio src="/assets/Audio/narration/thunderbird_09.mp3" preload="auto" crossorigin="anonymous"></audio>
            </a-assets>

            <!--Camera controls-->
            <a-entity camera wasd-controls look-controls position="0 1.6 0">
                <a-entity cursor="rayOrigin:mouse;" raycaster="far:20; interval:200; object:.interactive"></a-entity>
                <a-entity light="type:spot; intensity:0.6; castShadow:true; shadowBias:-0.0005; angle:40; penumbra:1.0;" position="0.5 -0.5 0" rotation="0 0 0"></a-entity>
            </a-entity>

          <!-- environment -->
          <a-entity environment="preset:forest;"></a-entity>

          <a-plane position="0 0 -20" height="7" width="2" color="black" link="href: main_cave.html"></a-plane>

          <!-- add thunder storm sound effects -->
          <a-sound src="assets/Audio/sound_effects/thunder_01.wav" autoplay="true" loop="true"></a-sound>

            <!-- makes storm appear 
                (doesnt do anything yet)
            -->
          <a-entity id="storm_button" position="-1 0 0">
            <a-entity class="button interactive" ; position="0 0.6 0" geometry="primitive:cylinder; radius:0.15; height:0.2;" material="color:rgb(100, 100, 255)"
                      animation__mouseenter="property:material.color; type:color; to:rgb(0, 0, 255); startEvents:mouseenter; dur:200"
                      animation__mouseleave="property:material.color; type:color; to:rgb(100, 100, 255); startEvents:mouseleave; dur:200"
                      animation__click="property:position.y; from:0.55; to:0.6; startEvents:click; dur:300" shadow></a-entity>
            <a-entity position="0 0.3 0" geometry="primitive:box; width:0.5; depth:0.5; height:0.6;" material="color:rgb(255, 255, 255)" shadow></a-entity>
        </a-entity>

        <!-- added a particle system component for rain (doesnt work yet) -->
        <a-entity id="rain" position="0 0 0" particle-system="preset: rain"></a-entity>
        

          <!-- makes thunderbird appear -->
          <a-entity id="thunderbird_button">
            <a-entity class="button interactive" thunderbird-appear ; position="0 0.6 0" geometry="primitive:cylinder; radius:0.15; height:0.2;" material="color:rgb(255, 100, 100)"
                      animation__mouseenter="property:material.color; type:color; to:rgb(255, 0, 0); startEvents:mouseenter; dur:200"
                      animation__mouseleave="property:material.color; type:color; to:rgb(255, 100, 100); startEvents:mouseleave; dur:200"
                      animation__click="property:position.y; from:0.55; to:0.6; startEvents:click; dur:300" shadow></a-entity>
            <a-entity position="0 0.3 0" geometry="primitive:box; width:0.5; depth:0.5; height:0.6;" material="color:rgb(255, 255, 255)" shadow></a-entity>
        </a-entity>

          <!-- placeholder for the thunderbird ---- appears when you click on the button
              - orbits around a sphere that is hidden underground -->
          <a-entity id="orbitPoint">
              <a-sphere position="0 -2 0" rotation="0 0 0" color="grey"  animation="property: rotation; to: 0 360 0 ; loop: true; dur: 10000" rotation="0 0 0">
                <a-entity id="thunderbird" visible="false">
                  <a-box position="15 15 0" color="red"></a-box>
                </a-entity>
              </a-sphere>
          </a-entity>
          

        </a-scene>
    </body>
</html>