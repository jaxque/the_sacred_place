<!--
    IMD3901B Design Studio 3 Winter 2022
    Term Project - The Sacred Meeting Place
    Triple Peanuts - Angelina Belingan, Jacqueline Lee, Violet Nguyen 
-->

<!DOCTYPE html>
<html>
    <head>
        <title>The Sacred Meeting Place</title>
            <meta name="description" content="The Sacred Meeting Place, a WebVR storytelling experience.">
            <script src="/js/aframe.min.js"></script>
            <script src="/js/aframe-environment-component.min.js"></script>

            <link rel="stylesheet" href="/css/user-gesture.css">
            
            <script>
                AFRAME.registerComponent('game', {
                    init: function() {
                        console.log('scene loaded');
                        document.querySelector('#user-gesture-button').style.display='block';
                    }
                });

                const startGame = function() {
                    // Hide user-gesture overlay
                    document.querySelector('user-gesture-overlay').style.display='none';

                    // Start ambience
                    const ambientSounds = document.querySelectorAll('.bgm');
                    ambientSounds.forEach(function(soundEntity) {
                        soundEntity.components.sound.playSound();
                    });
                }
            </script>
    </head>

    <body>
        <!-- Start Screen -->
        <div id="user-gesture-overlay">
            <h1>The Sacred Meeting Place</h1>
            <div class="UI">
                <!-- Play button -->
                <button id="user-gesture-button" onclick="startGame();">Play</button>

                <!-- Options button -->
                <button id="user-gesture-button">Options</button> 

                <!-- Credits button - Links to credits page -->
                <button id="user-gesture-button"><a href="credits.html" style="text-decoration:none">Credits</a></button> 
            </div>
        </div>
        
        <!-- Game -->
            <a-scene game>
                <a-assets timeout="1000">
                    <!-- Ambience (add audio) 
                    <audio id="ambience" src="" preload="auto" crossorigin="anonymous"></audio> -->

                    <!-- Images and imported models -->
                    
                </a-assets>

                <a-entity camera wasd-controls look-controls position="0 1.6 0">
                    <a-entity cursor="rayOrigin:mouse;" raycaster="far:20; interval:200; object:.interactive"></a-entity>
                    
                    <!-- Flashlight
                        <a-entity light="type:spot; intensity:0.6; castShadow:true; shadowBias:-0.0005; angle:40; penumbra:1.0;" 
                        position="0.5 -0.5 0" rotation="0 0 0"></a-entity> -->
                </a-entity>

                <a-entity>
                    <a-entity class = "color interactive"></a-entity>
                    <a-entity id="color_box" position="-1 2 -3"
                    geometry="primitive:box; width:1.0; height:1.0; depth:1.0" 
                    material="color:red;"></a-entity>
                </a-entity>

                <a-entity environment="preset:default"></a-entity>

            </a-scene>
    </body>
</html>